---
toc: false
comments: false
layout: post
title: OOP, CSSE mini project Part 2
description: Building Game Levels
type: ccc
courses: { csse: {week: 14} }
---

{% include nav_oop.html %}

## OOP, Game Levels

Using heirarchy below, the start screen, game screens, and game over screens have been created.

```text
GameEnv
|   ├── Attributes:
│   |   ├── levels
│   |   ├── gameObjects
|   │   └── ...
|   |
|   ├── Methods: 
│   |    ├── update: update, draw
│   |    ├── destroy: all gameObjects
│   |    └── ...
│
├── GameObject
│   ├── Player: sprite animation, wasd
│   ├── Background: fit to screen, scrolling 
│   ├── Platform: fixed to bottom, scrolling
│   └── ...
│
├── GameLevel
|   ├── Tag: key
│   ├── Attributes:
│   |   ├── playerAssets
│   |   ├── backgroundAssets
│   |   ├── platformAssets
│   |   └── ...
|   |
│   └── Methods: 
│   |    ├── load: "new" GameObject created from assets
│   |    └── ...
|
└── GameControl
│   ├── Methods: 
|   |    ├── gameLoop: drive action of game level
│   |    ├── transitionToLevel: destroys and creates objects for game level
│   |    └── ...
|   |
│   └── ...
```

### Content Setup

Each level has a tag, background, platform, player, and callback function.  These attributes will be extended over time.  Immediately, it is very apparent, description is missing elements like enemies and objects in the game.  But, this progressive structure, enables Game Control to cycle from level to level on callback completion detection. 

- start/home sequence contains entry screen of game, this level could contain all game setup: player choice, speed, leader board.
- hills would contain classic mario game level(s)
- alien would contain adapted/personalized game level(s)
- gameover should contain logic for persistence, saving state in local storage, resume at point, start over, ...  


```javascript
/*  ==========================================
 *  ========== Game Level setup ==============
 *  ==========================================
 * Start/Homme sequence
 * a.) the start level awaits for button selection
 * b.) the start level automatically cycles to home level
 * c.) the home advances to 1st game screen when button selection is made
*/
GameLevel.create('start', '', '', '', startGameCallback);
GameLevel.create('home', '{{homeFile}}', '', '', homeScreenCallback);
// Game Screens
GameLevel.create('hills', '{{backgroundFile}}', '{{platformFile}}', '{{playerFile}}', testerCallBack);
GameLevel.create('alien', '{{backgroundFileAlt}}', '{{platformFile}}', '{{playerFile}}', testerCallBack);
// Test Game Screens, used during development and test
// GameLevel.create('noPlatform', '{{backgroundFileCastles}}', '', '{{playerFile}}', testerCallBack);
// GameLevel.create('noBackgroun', '', '{{platformFile}}', '{{playerFile}}', testerCallBack);
// Game Over
GameLevel.create('gameOver', '{{backgroundFileGameOver}}', '', '', gameOverCallBack);
```

### Callbacks

The callback on level currently supports advancement indicator.  The callback is continually be monitored in gameLoop and 

- store game status or game state to local storage
- capturing events in game that accumulate and store points


This below code is considered dummy code and is looking for purposefull implementation.  The callback is likely different for each game play level.

```javascript
// Level completion tester
function testerCallBack() {
    // console.log(GameEnv.player?.x)
    if (GameEnv.player?.x > 500) {
        return true;
    } else {
        return false;
    }
}
```

### Game Play

After creating GameLevel, game begins by starting the gameLoop.

```javascript
// start game
GameControl.gameLoop();
```

## Hacks: Next Steps

All (software)engineering is a progressive iteration, a series of design, coding, test, an failures.  From this experience I would like to tackle these obstacles...

### Scrolling screen
Move start scrolling screen after player reaches certain part of screen and direction.  

- Primary Background needs to be overlaid on a Passive Background to avoid shadowing as screen moves to right.
- Screen Scrolling and Platform scrolling need to work in association with character movement.  As player moves left or right screen scrolling moves at similar rate. 

### Background, Platform, Player scaling
Review techniques for scaling key elements on screen to work in unison. 

- Currently Platform and Player gets out of sync with regards to Background screen in smaller screen sizes.
- Player size is not changing on resize.

### Enemies, Obstacles
Make a game level that includes enemies and obstacles.  Here are some ideas...

- Add Obstacle (tube) to escape game level, itegrate with Callback detection
- Add NPC Character (3 goombas), that get in the way of reaching Tube 

### Jumping Animation, Collisions, Points
Interact with and destroy enemies.

- Add Collision detection and scoring.  
- Jump on a goomba and receive a point.  
- Side collision with goomba resets to start of screen

### Player flexibility
Look into a technique to change player froom Mario sprite to Alternative Sprite.

- Ultimately, startup screen would allow you to change/select sprite
- The WASD definition in Player should be relocated and redesigned to be changeable.

### Player improvements
Improve animations and movements of player.  

- idle() add a stationary animation, player start right but can shift left
- moveLeft(), moveRight() move starts with walking animation, but transitions to running after hold
- stopMoving() stop moving should scale back based off of speed then transition to idle
- jump() use appropriate jump right or left animation and consider gravity and arcs
- attack() add attack or power animation that could avoid kill from enemies

### Leaderboard
Start a game leaderboard.  

- Use localstorage to record game play sessions, automatically at first. Time and points by level could be used as stats.
- Board displays on Game Over screen by default, reorg Game Over screen accordinginly

### Restart at level
Game state recording

- On start screen integrate technique that allows you to start game at a level
- Encorporate a selection that allows you to pick level from tag of level