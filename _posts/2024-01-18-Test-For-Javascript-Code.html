<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <style>
      .cells{
        min-height: 100%;
        width: calc(50% - 2px);
        border: solid black;
        float: right
      }
      #runner{
        width: 100%;
        border: 0px;
        height: 100%;
      }
      body{
        padding: 0px
      }
    </style>
    <div style = "display: flex; width: 100%; height: calc(98vh - 50px)">
      <textarea style = "resize: none;" class = "cells">
Write Some Code Here!
      </textarea>
      <script>
        function runCode(){
          console.log(document.getElementsByTagName("textarea")[0].value)
          document.getElementById("runner").contentWindow.document.close()
          document.getElementById("runner").contentWindow.document.write(document.getElementsByTagName("textarea")[0].value)
        }
        document.addEventListener("keydown", (event)=>{
          if(event.keyCode == 9){
            event.preventDefault()
            var currentTextArea = document.getElementsByTagName("textarea")[0]
            console.log("Getting elements", currentTextArea.selectionStart, currentTextArea.selectionEnd)
            for(var testText = 0; testText < currentTextArea.selectionStart; testText++){
            }
            currentTextArea.value = currentTextArea.value.slice(0, currentTextArea.selectionStart) + "    " + currentTextArea.value.slice(currentTextArea.selectionEnd, currentTextArea.innerText.length - 1)
          }
        })
      </script>
      <div class = "cells">
        <iframe id = "runner">
        </iframe>
      </div>
      <br>
    </div>
    <button style = "background-color: blue; border: 1px grey; border-radius: 5px; color: white; padding: 10px; margin-top: 10px; float: right;" onclick = "runCode()">
      Run Code
    </button>
  </body>
</html>